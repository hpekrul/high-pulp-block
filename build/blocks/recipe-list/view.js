(()=>{"use strict";var e={352:(e,t,a)=>{var l=a(34);t.C=l.createRoot,l.hydrateRoot},34:e=>{e.exports=window.ReactDOM}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var s=t[l]={exports:{}};return e[l](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window.React;var t=a.n(e),l=a(352);function n({rating:t,setRating:a,readonly:l}){const[n,s]=(0,e.useState)(t||0);return(0,e.createElement)("div",{className:l?"readonly stars":"stars"},[1,2,3,4,5].map((l=>(0,e.createElement)("span",{className:l<=n?"star on":"star off",onClick:()=>{a(l)},onMouseEnter:()=>{s(l)},onMouseLeave:()=>{s(t)}},"â˜…"))))}class s extends t().Component{state={title:"",details:"",rating:0,link:"",image:""};addRecipe(e){e.preventDefault();const t={title:this.state.title,content:this.state.details,acf:{recipe_rating:parseInt(this.state.rating)||0,recipe_image:this.state.image,recipe_url:this.state.link},status:"publish"};this.props.addRecipe?.(t),this.setState({title:"",details:"",rating:0,link:"",image:""})}render(){return(0,e.createElement)("form",{className:"new-recipe-form",onSubmit:e=>this.addRecipe(e)},(0,e.createElement)("div",null,(0,e.createElement)("button",{type:"submit",onSelect:this.image},"Upload Image")),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Recipe Name:",(0,e.createElement)("input",{type:"text",value:this.state.title,onInput:e=>this.setState({title:e.target.value})}))),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Recipe Details:",(0,e.createElement)("textarea",{value:this.state.details,onInput:e=>this.setState({details:e.target.value})}))),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Recipe Link:",(0,e.createElement)("input",{type:"text",value:this.state.link,onInput:e=>this.setState({link:e.target.value})}))),(0,e.createElement)("div",null,(0,e.createElement)("label",null,"Overall Rating:",(0,e.createElement)(n,{rating:this.state.rating,setRating:e=>this.setState({rating:e})}))),(0,e.createElement)("button",{type:"submit"},"Add Recipe"))}}class r extends t().Component{render(){let{title:t,details:a,rating:l,link:s,image:r}=this.props;return(0,e.createElement)("div",{className:"col pt-4"},(0,e.createElement)("div",{className:"card"},(0,e.createElement)("img",{src:r,className:"card-img-top",alt:"..."}),(0,e.createElement)("div",{className:"card-body"},(0,e.createElement)("h5",{className:"card-title"},t),(0,e.createElement)("p",{className:"card-text",dangerouslySetInnerHTML:{__html:a}}),(0,e.createElement)(n,{rating:l,readonly:!0}),(0,e.createElement)("a",{href:s,className:"btn btn-primary mt-5"},"Recipe Details"))))}}class i extends t().Component{render(){return(0,e.createElement)("div",{className:"recipe-list"},(0,e.createElement)("div",{className:"contaier"},(0,e.createElement)("div",{className:"row"},this.props.recipes.map((t=>(0,e.createElement)(r,{title:t.attributes.title.rendered,details:t.attributes.content.rendered,rating:t.attributes.acf.recipe_rating,link:t.attributes.acf.recipe_url,image:t.attributes.acf.recipe_image,key:t.attributes.id}))))))}}class c extends t().Component{state={recipes:[],loggedIn:null};addRecipe(e){new wp.api.models.Recipe(e).save().done((e=>{console.log("saved!",e),this.getRecipes()})).fail((e=>{console.error("failed",e)}))}addMedia(e){new wp.api.models.Media(e).save().done((e=>{console.log("saved",e)}))}getRecipes(){const e=new wp.api.collections.Recipe;e.fetch().done((t=>{console.log("recipes!",t,e),this.setState({recipes:e.models})})).fail((e=>{console.error("failed!",e)}))}getLoggedInUser(){(new wp.api.models.UsersMe).fetch().done((e=>{this.setState({loggedIn:!0})})).fail((e=>{this.setState({loggedIn:!1})}))}componentDidMount(){this.getRecipes(),this.getLoggedInUser()}render(){return(0,e.createElement)("div",null,(0,e.createElement)("h3",null,"Latest Recipes"),(0,e.createElement)(i,{recipes:this.state.recipes}),(0,e.createElement)("hr",null),(0,e.createElement)("h3",null,"Submit a Recipe"),!0===this.state.loggedIn&&(0,e.createElement)(s,{addRecipe:e=>this.addRecipe(e)}),!1===this.state.loggedIn&&(0,e.createElement)("div",{className:"error-msg"},"You must be logged in to submit a review."))}}document.querySelectorAll(".wp-block-hp-recipe-list").forEach((t=>{(0,l.C)(t).render((0,e.createElement)(c,null))}))})()})();